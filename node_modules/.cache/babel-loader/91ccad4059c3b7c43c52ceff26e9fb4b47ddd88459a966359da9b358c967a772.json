{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/lalmastar/OneDrive/Desktop/Questify/questify-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/lalmastar/OneDrive/Desktop/Questify/questify-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/lalmastar/OneDrive/Desktop/Questify/questify-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{AllQuestions,AutherWriteBox,Nav}from\"../components\";import{useNavigate,useParams}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{query}from\"../features/asyncThunks/queries.thunk\";import{recommended_Questions}from\"../features/asyncThunks/questions.thunk\";import{Loading,NoData}from\"../assets\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var cssW={bgColor:\"white\",itemBg:\"#d9d9d9\",isAns:true,isHeader:true,isFollowers:true};var cssD={bgColor:\"#EAEAEA\",itemBg:\"white\",isAns:false,isHeader:false};var Question=function Question(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),recommendedQuests=_useState4[0],setRecommendedQuests=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useParams=useParams(),question_id=_useParams.question_id;var navigate=useNavigate();var dispatch=useDispatch();var answerAdded=useSelector(function(state){return state.qNaPage.answerAdded;});useEffect(function(){if(!localStorage.getItem(\"questify-log-isauth-T\")){navigate(\"/login\");}function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,questsData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return dispatch(query({question_id:question_id}));case 3:res=_context.sent;setData(res.payload.question);_context.next=7;return dispatch(recommended_Questions({question:res.payload.question.question}));case 7:questsData=_context.sent;setRecommendedQuests(questsData.payload);setLoading(false);case 10:case\"end\":return _context.stop();}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[question_id]);useEffect(function(){function fetchData(){return _fetchData2.apply(this,arguments);}function _fetchData2(){_fetchData2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return dispatch(query({question_id:question_id}));case 2:res=_context2.sent;setData(res.payload.question);case 4:case\"end\":return _context2.stop();}},_callee2);}));return _fetchData2.apply(this,arguments);}fetchData();},[answerAdded]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsxs(\"main\",{className:\"question-main-container\",children:[/*#__PURE__*/_jsxs(\"section\",{children:[!loading&&data!==null&&data!==void 0&&data.question?/*#__PURE__*/_jsx(\"div\",{className:\"question-box\",children:/*#__PURE__*/_jsx(AutherWriteBox,{styles:cssW,id:data.id,statement:data.question,user:data.user,isupvoted:data.isupvoted,upvotes:data.upvotes,isdownvoted:data.isdownvoted,downvotes:data.downvotes,date:data.date})}):\"\",!loading&&data!==null&&data!==void 0&&data.answer?/*#__PURE__*/_jsxs(\"div\",{className:\"answer-holder\",children:[/*#__PURE__*/_jsx(\"hr\",{className:\"answer-hr\"}),/*#__PURE__*/_jsx(\"div\",{className:\"answers-container\",children:data.answer.map(function(ans){return/*#__PURE__*/_jsx(\"div\",{className:\"answer\",children:/*#__PURE__*/_jsx(AutherWriteBox,{styles:cssD,id:ans.id,statement:ans.answer,user:ans.user,isupvoted:ans.isupvoted,upvotes:ans.upvotes,downvotes:ans.downvotes,isdownvoted:ans.isdownvoted,date:ans.date})},ans.id);})})]}):\"\",loading&&/*#__PURE__*/_jsx(\"div\",{style:{width:\"55vw\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:/*#__PURE__*/_jsx(Loading,{})})}),!loading&&!(data!==null&&data!==void 0&&data.question)?/*#__PURE__*/_jsxs(\"div\",{className:\"no-data\",children:[/*#__PURE__*/_jsx(\"div\",{style:{width:\"55vw\"},children:/*#__PURE__*/_jsx(NoData,{})}),\"      \"]}):\"\"]}),/*#__PURE__*/_jsxs(\"section\",{children:[loading&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:/*#__PURE__*/_jsx(Loading,{})})}),!loading&&!(data!==null&&data!==void 0&&data.question)?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:/*#__PURE__*/_jsx(NoData,{})})}):\"\",!loading&&recommendedQuests!==null&&recommendedQuests!==void 0&&recommendedQuests.length?/*#__PURE__*/_jsx(AllQuestions,{data:recommendedQuests,title:\"Recommended Questions\"}):\"\"]})]})]});};export default Question;","map":{"version":3,"names":["React","useEffect","useState","AllQuestions","AutherWriteBox","Nav","useNavigate","useParams","useDispatch","useSelector","query","recommended_Questions","Loading","NoData","jsx","_jsx","jsxs","_jsxs","cssW","bgColor","itemBg","isAns","isHeader","isFollowers","cssD","Question","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","recommendedQuests","setRecommendedQuests","_useState5","_useState6","loading","setLoading","_useParams","question_id","navigate","dispatch","answerAdded","state","qNaPage","localStorage","getItem","fetchData","_fetchData","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","questsData","wrap","_callee$","_context","prev","next","sent","payload","question","stop","_fetchData2","_callee2","_callee2$","_context2","children","className","styles","id","statement","user","isupvoted","upvotes","isdownvoted","downvotes","date","answer","map","ans","style","width","length","title"],"sources":["C:/Users/lalmastar/OneDrive/Desktop/Questify/questify-frontend/src/pages/Question.page.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nimport { AllQuestions, AutherWriteBox, Nav } from \"../components\";\r\nimport { useNavigate , useParams } from \"react-router-dom\";\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { query } from \"../features/asyncThunks/queries.thunk\"\r\nimport { recommended_Questions } from \"../features/asyncThunks/questions.thunk\";\r\nimport { Loading, NoData } from \"../assets\";\r\n\r\nconst cssW = {\r\n  bgColor: \"white\",\r\n  itemBg: \"#d9d9d9\",\r\n  isAns: true,\r\n  isHeader: true,\r\n  isFollowers: true,\r\n};\r\n\r\nconst cssD = {\r\n  bgColor: \"#EAEAEA\",\r\n  itemBg: \"white\",\r\n  isAns: false,\r\n  isHeader: false,\r\n};\r\n\r\n\r\nconst Question = () => {\r\n  const [data, setData] = useState({})\r\n  const [recommendedQuests,setRecommendedQuests] = useState([]);\r\n  const [loading,setLoading] = useState(false);\r\n  const {question_id} = useParams();\r\n\r\n  const navigate = useNavigate()\r\n  const dispatch = useDispatch()\r\n  const answerAdded  = useSelector((state) =>state.qNaPage.answerAdded);\r\n\r\n  useEffect(()=>{\r\n    if(!localStorage.getItem(\"questify-log-isauth-T\")){\r\n      navigate(\"/login\")\r\n    }\r\n    async function fetchData(){\r\n      setLoading(true);\r\n      const res=await dispatch(query({question_id}))\r\n      setData(res.payload.question)\r\n      const questsData = await dispatch(recommended_Questions({question:res.payload.question.question}));\r\n      setRecommendedQuests(questsData.payload)\r\n      setLoading(false);\r\n    }\r\n    fetchData();\r\n\r\n  },[question_id])\r\n\r\n  useEffect(()=>{\r\n    async function fetchData(){\r\n      const res=await dispatch(query({question_id}))\r\n      setData(res.payload.question)\r\n    }\r\n    fetchData();\r\n  },[answerAdded])\r\n\r\n  return (\r\n    <div>\r\n      <Nav />\r\n      <main className=\"question-main-container\">\r\n        <section>\r\n          {(!loading && data?.question )? <div className=\"question-box\">\r\n            <AutherWriteBox styles={cssW} id={data.id} statement={data.question} user={data.user} isupvoted={data.isupvoted} upvotes={data.upvotes} isdownvoted={data.isdownvoted} downvotes={data.downvotes} date={data.date}  />\r\n          </div>:\"\" }\r\n          {(!loading && data?.answer) ?\r\n          <div className=\"answer-holder\">\r\n            <hr className=\"answer-hr\" />\r\n            <div className=\"answers-container\">\r\n              {\r\n                data.answer.map(ans=>{\r\n                  return <div className=\"answer\" key={ans.id}>\r\n                    <AutherWriteBox styles={cssD} id={ans.id} statement={ans.answer} user={ans.user} isupvoted={ans.isupvoted} upvotes={ans.upvotes} downvotes={ans.downvotes} isdownvoted={ans.isdownvoted} date={ans.date}   />  \r\n                  </div>\r\n                })\r\n              }\r\n            </div>\r\n          </div>:\"\"}\r\n          {(loading) && <div style={{width:\"55vw\"}} ><div className=\"no-data\">\r\n                  <Loading/>\r\n                </div></div>}\r\n          {(!loading && !data?.question )?<div className=\"no-data\">\r\n          <div style={{width:\"55vw\"}} >\r\n                  <NoData/>\r\n          </div>      </div>:\"\"}\r\n        </section>\r\n        <section>\r\n        {(loading) && <div><div className=\"no-data\">\r\n                  <Loading/>\r\n                </div></div>}\r\n          {(!loading && !data?.question )?<div ><div className=\"no-data\">\r\n                  <NoData/>\r\n                </div></div>:\"\"}\r\n        { (!loading && recommendedQuests?.length )? <AllQuestions data={recommendedQuests} title={\"Recommended Questions\"} /> :\"\" }\r\n        </section>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Question;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}