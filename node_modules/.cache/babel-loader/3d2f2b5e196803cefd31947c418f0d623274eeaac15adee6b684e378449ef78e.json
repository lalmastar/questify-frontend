{"ast":null,"code":"import _defineProperty from\"C:/Users/lalmastar/OneDrive/Desktop/Questify/questify-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"C:/Users/lalmastar/OneDrive/Desktop/Questify/questify-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/lalmastar/OneDrive/Desktop/Questify/questify-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/lalmastar/OneDrive/Desktop/Questify/questify-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Buffer}from\"buffer/\";import axios from\"axios\";import{v4 as uuid}from\"uuid\";import{useDispatch}from\"react-redux\";import{avatarThunk}from\"../features/asyncThunks/user.thunk\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SelectAvatar=function SelectAvatar(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),avatars=_useState2[0],setAvatars=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),selected=_useState4[0],setSelected=_useState4[1];var dispatch=useDispatch();var navigate=useNavigate();useEffect(function(){if(!localStorage.getItem(\"questify-log-isauth-T\")){navigate(\"/login\");}var data=[];var image,buffer;function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var i;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:i=0;case 1:if(!(i<14)){_context.next=12;break;}_context.next=4;return axios(\"https://avatars.dicebear.com/api/adventurer/\".concat(Math.floor(Math.random()*1000),\".svg\"));case 4:image=_context.sent;_context.next=7;return new Buffer(image.data);case 7:buffer=_context.sent;data.push(buffer.toString(\"base64\"));case 9:i++;_context.next=1;break;case 12:setAvatars(data);case 13:case\"end\":return _context.stop();}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);var handleSetAavatar=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _res$payload;var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return dispatch(avatarThunk({avatar:\"data:image/svg+xml;base64,\".concat(selected)}));case 2:res=_context2.sent;if((_res$payload=res.payload)!==null&&_res$payload!==void 0&&_res$payload.success){navigate(\"/\");}case 4:case\"end\":return _context2.stop();}},_callee2);}));return function handleSetAavatar(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-form-container\",style:{height:\"65%\",width:\"60%\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Questify\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"select-avatar-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"select-avatar-header\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Select Your Avatar\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"avatars-container\",children:avatars.length?avatars.map(function(img){var _jsx2;return/*#__PURE__*/_jsx(\"div\",{className:\"avatar \".concat(selected===img?\"active-avatar\":\"\"),onClick:function onClick(){setSelected(img);},children:/*#__PURE__*/_jsx(\"img\",(_jsx2={alt:\"avatar\",src:\"data:image/svg+xml;base64,\".concat(img)// src={faker.image.avatar()}\n},_defineProperty(_jsx2,\"alt\",\"avatar\"),_defineProperty(_jsx2,\"width\",\"100%\"),_defineProperty(_jsx2,\"height\",\"100%\"),_jsx2))},uuid());}):\"Please wait loading...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"selected-button\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSetAavatar,children:\"Register\"})})]})]})});};export default SelectAvatar;","map":{"version":3,"names":["React","useEffect","useState","Buffer","axios","v4","uuid","useDispatch","avatarThunk","useNavigate","jsx","_jsx","jsxs","_jsxs","SelectAvatar","_useState","_useState2","_slicedToArray","avatars","setAvatars","_useState3","_useState4","selected","setSelected","dispatch","navigate","localStorage","getItem","data","image","buffer","fetchData","_fetchData","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","i","wrap","_callee$","_context","prev","next","concat","Math","floor","random","sent","push","toString","stop","handleSetAavatar","_ref","_callee2","_res$payload","res","_callee2$","_context2","avatar","payload","success","className","children","style","height","width","length","map","img","_jsx2","onClick","alt","src","_defineProperty"],"sources":["C:/Users/lalmastar/OneDrive/Desktop/Questify/questify-frontend/src/pages/SelectAvatar.page.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Buffer } from \"buffer/\";\r\nimport axios from \"axios\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { avatarThunk } from \"../features/asyncThunks/user.thunk\"\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst SelectAvatar = () => {\r\n  const [avatars, setAvatars] = useState([]);\r\n  const [selected, setSelected] = useState(\"\");\r\n\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (!localStorage.getItem(\"questify-log-isauth-T\")) {\r\n      navigate(\"/login\");\r\n    }\r\n\r\n    const data = [];\r\n    let image, buffer;\r\n    async function fetchData() {\r\n      for (let i = 0; i < 14; i++) {\r\n        image = await axios(\r\n          `https://avatars.dicebear.com/api/adventurer/${Math.floor(\r\n            Math.random() * 1000\r\n          )}.svg`\r\n        );\r\n        buffer = await new Buffer(image.data);\r\n        data.push(buffer.toString(\"base64\"));\r\n      }\r\n      setAvatars(data);\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleSetAavatar=async ()=>{\r\n    const res = await dispatch(avatarThunk({avatar:`data:image/svg+xml;base64,${selected}`}))\r\n    if(res.payload?.success){\r\n      navigate(\"/\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n      <div\r\n        className=\"login-form-container\"\r\n        style={{ height: \"65%\", width: \"60%\" }}\r\n      >\r\n        <h1>Questify</h1>\r\n        <hr />\r\n        <div className=\"select-avatar-container\">\r\n          <div className=\"select-avatar-header\">\r\n            <h3>Select Your Avatar</h3>\r\n          </div>\r\n          <div className=\"avatars-container\">\r\n            {avatars.length\r\n              ? avatars.map((img) => {\r\n                  return (\r\n                    <div\r\n                      className={`avatar ${\r\n                        selected === img ? \"active-avatar\" : \"\"\r\n                      }`}\r\n                      key={uuid()}\r\n                      onClick={() => {\r\n                        setSelected(img);\r\n                      }}\r\n                    >\r\n                      <img\r\n                        alt=\"avatar\"\r\n                        src={`data:image/svg+xml;base64,${img}`}\r\n                        // src={faker.image.avatar()}\r\n                        alt=\"avatar\"\r\n                        width=\"100%\"\r\n                        height=\"100%\"\r\n                        // onClick={() => setSelectedAvatar(index)}\r\n                      />\r\n                    </div>\r\n                  );\r\n                })\r\n              : \"Please wait loading...\"}\r\n          </div>\r\n          <div className=\"selected-button\">\r\n            <button onClick={handleSetAavatar} >Register</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SelectAvatar;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}